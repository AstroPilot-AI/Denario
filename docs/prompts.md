# Prompts

Here are detailed the exact prompts employed for the agents in each of the steps in the AstroPilot generation process.

## Idea

### Planner instructions

```py
rf"""
Given these datasets, and information, make a plan according to the following instructions: 

- Ask idea_maker to generate 5 new research project ideas related to the datasets.
- Ask idea_hater to critique these ideas.
- Ask idea_maker to select and improve 2 out of the 5 research project ideas given the output of the idea_hater.
- Ask idea_hater to critique the 2 improved ideas. 
- Ask idea_maker to select the best idea out of the 2. 
- Ask idea_maker to report the best idea in the form of a scientific paper title with a 1 sentence description. 

The goal of this task is to generate a research project idea based on the data of interest. 
Don't suggest to perform any calculations or analyses here. The only goal of this task is to obtain the best possible project idea.
"""
```

## Methods

### Planner instructions

```py
rf"""
{research_idea}

Instruction for planning:

Given these datasets, and information on the features and project idea, we want to design a methodology to implement this idea.
The goal of the task is to write a plan that will be used to generate a detailed description of the methodology that will be used to perform the research project.

**Elicit Project-Specific Reasoning:**
   - Ask the *researcher* to provide reasoning  relevant to the given project idea.
   - Clarify the specific hypotheses, assumptions, or questions that should be investigated.
   - This can be done in multiple steps. 


**MOST IMPORTANT: Write the Methodology description:**
   - With the *researcher*, write a **detailed description (approximately 500 words)** describing the methodology that will be used to perform the project analysis.
   - The description should clearly outline the steps, techniques, and rationale derived from the exploratory data analysis.
   - If EDA was performed, include relevant results from the EDA in the form of key statistics or tables (do not include references to plots, or generated files here).
   - The focus should be strictly on the methods and workflow for this specific project to be performed. **do not include** any discussion of future directions, future work, project extensions, or limitations.
   - The description should be written as if it were a senior researcher explaining to her research assistant how to perform the research necessary for this project.

The plan must end with the Methodology description generated by the researcher. The final step of the plan must be such that the FULL Methodology description is provided (as a result of the previous steps).

The only agent involved in this workflow is the researcher.

In this task we do not perform any calculations or analyses, only outline the methodology. 

The methodology should focus on describing the research and analysis that will be performed.
"""
```

### Researcher instructions

```py
rf"""
{research_idea}

Given these datasets, and information on the features and project idea, we want to design a methodology to implement this idea.
The goal of the task is to write a detailed description of the methodology that will be used to carry out the research project.

- When asked about generating the Methodology description, your focus should be strictly on the statistical and machine learning methods for this specific project to be performed. **Do not include** any discussion of future directions, future work, project extensions, or limitations.
- The methodology description should be written as if it were a senior researcher explaining to her research assistant how to perform the project. 

The designed methodology should focus on describing the research and analysis that will be performed.
"""
```

## Experiment

### Planner instructions

```py
rf"""
{research_idea}

{methodology}


Given these datasets, and information on the features and project idea and methodology, we want to perform the project analysis and generate the results, plots and insights.
The goal is to perform the in-depth research and analysis. 

The plan must strictly involve only the following agents: {involved_agents_str}.


In the final step of the plan, the researcher agent should generate extensive insights (around 2000 words), including discussion of quantitative results and plots previously generated. This final report is intended to be the core material of the Results section of a paper.
Thus, the last agent in the plan must be the researcher.

The goal here is to do the in-depth research and analysis, not the EDAs.
"""
```

### Engineer instructions

```py
rf"""
{research_idea}

{methodology}


Given these datasets, and information on the features and project idea and methodology, we want to perform the project analysis and generate the results, plots and key statistics.
The goal is to perform the in-depth research and analysis. This means that you must generate the results, plots and key statistics.

Warnings for computing and plotting: 
- make sure dynamical ranges are well captured (carefully adjust the limits, binning, and log or linear axes scales, for each feature).

For histograms (if needed):
-Use log-scale for features with values spanning several orders of magnitudes.


**GENERAL IMPORTANT INSTRUCTIONS**: You must print out in the console ALL the quantitative information that you think the researcher will need to interpret the results. (The researcher does not have access to saved data files, only to what you print out!)
Remember that the researcher agent can not load information from files, so you must print ALL necessary info in the console (without truncation). For this, it may be necessary to change pandas (if using it) display options.
"""
```

### Researcher instructions

```py
rf"""
{research_idea}

{methodology}

Given the results, plots and key statistics generated by the engineer, your task is to generate a detailed **discussion** and **interpretation** of the results, plots and key statistics, including reporting meaningful quantitative results, tables and references to the plots previously generated in the session.
At the end the goal is to generate the in-depth research report (around 2000 words) based on the results, plots and key statistics provided by the engineer, which will form the core material of a result section of a paper.
"""
```

## Paper

### Summary

```py
rf"""
Summarize the text below and combine with the summarized text. 

Summarized text:
{summary}

Text to summarize:
{text}

Respond in this format:
\begin{{Summary}}
<Summary>
\end{{Summary}}

In <Summary> put the total summary.
"""
```

### References

```py
rf"""
You are provided an original text from a scientific paper written in LaTeX. In the text, there are figures and references to figures. Your task is to make sure that the references to the figures are correct. If there are errors, please correct the text to fix it. Follow these guidelines:

- Do not add or remove text
- Focus on fixing errors in references to figures
- For instance, given this figure
- If references match with its corresponding figure label, do not change it

\\begin{{figure}}[h!]
    \\centering
    \\includegraphics[width=0.5\textwidth]{{../{state['files']['Folder']}/plots/A.png}}
    \\caption{{Histogram of GroupSFR for two different values of non-Gaussianities. The blue histogram represents $f = 200$ and the red histogram represents $f = -200$. Large differences are seen in the normalized density of GroupSFR for the two different values of $f$.}}
    \\label{{fig:GroupSFR_hist}}
\\end{{figure}}

This reference is wrong \\ref{{fig:A.png}} and should be changed to \\ref{{fig:GroupSFR_hist}}

Please, check that the name of the references match with their respective labels.

Original text:
{text}

**Respond in this format**

\\begin{{Text}}
<TEXT>
\\end{{Text}}

In <TEXT> put the corrected text.

"""
```

### Fix errors

```py
rf"""
The text below has problems and LaTeX cannot compile it. You are provided with the text together with the LaTeX compilation error. Your task is to fix the text so that it compiles properly in LaTeX. Please follow these instructions:

- The text you are given is just a small part of a LaTeX paper. Thus, you dont need to add things like \\begin{{document}}.
- Fix **all LaTeX errors** found in the compilation error
- Pay special attention to underscores. It is likely that an underscores _ may need to be \\_ to compile properly
- Return the original text but with the errors fixed
- Keep the text intact. Only fix the errors without changing anything else

Text:
{state['paper'][state['latex']['section_to_fix']]}

Error:
{error}
    
Respond in this format:

\begin{{Text}}
<TEXT>
\end{{Text}}

In <TEXT>, put the new version of the text with the LaTeX errors fixed.
"""
```